<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaving California</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body class="bg-dark">
    <div class="wrapper">
        <nav class="navbar navbar-dark bg-dark navbar-expand-lg">
            <a class="navbar-brand" href="index.html">Refresh</a>
        </nav>
        <div class="jumbotron">
            <h1 class="display-4 text-dark">Is it time to leave?</h1>
        </div>
        <div class="container-fluid">
            <div class="row" id="migration-map">
                <div class="col-md-3">
                    <h3>2018 California Migration Map</h3>
                    <p>This map shows the migration flow out of California for 2018. The states that are included had more than 10,000 people migrate from California. Select a circle to learn more.</p>
                    <p>The cities used are just to represent a major city within the migration state. There is no data that includes where within each state Californians migrated.</p>    
                </div>
                <div class="col-md-9">
                    <!-- The div that holds our Cali_MigFlow map -->
                    <div id="mapid"></div>
                </div>
            </div>
        </div>
    </br>
    </br>
        <div class="container-fluid">
            <div class="row" id="housing-cost-map">
                <iframe width="100%" height="800" src="https://shannon-goddard.github.io/Correlation_vs_Causation/" 
    frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
    allowfullscreen>
                </iframe>
            </div>
        </div>
    </br>
        <div class="container-fluid">
            <div class="row" id="housing-analysis">
                <div class="col-md-6">
                    <h3>California Housing Costs</h3>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Data for LinReg</th>
                                <th>Prediction for CA in 2030</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2010-2018 census.gov</td>
                                <td>$2,410.56/mo</td>
                            </tr>
                            <tr>
                                <td>2013-2018 census.gov</td>
                                <td>$3,044.50/mo</td>
                            </tr>
                            <tr>
                                <td>4/96-1/20 Zillow</td>
                                <td>$678,226 (typical home value)</td>
                            </tr>
                            <tr>
                                <td>2010-2018 census.gov</td>
                                <td>$865,060 (median home value)</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>The census.gov data for 2010-2018 shows the median cost of housing decrease during the recession, lasting through 2013. The cost of housing is then shown to increase steadily. This data is clearly not linear, and looking at the prediction from this linear regression shows that it might not be very accurate. The median monthly cost of housing is already very close to $2400, which would suggest that another large dip would need to happen first.</p>
                    <p>A second attempt at a linear regression was performed with the median cost of housing from 2013 through 2018, in the hopes that it would be more accurate including the data that is more linear. The predicted montly housing cost seems more fitting with the current trend, but is also alarmingly large and hopefully not sustainable.</p>
                    <p>The Zillow data shows the increase of typical home value through 2008, the decrease during the recession lasting until just before 2012, and then home value has continued to increase since 2012. A linear regression was tried here as well, in the hopes that the peaks and valleys would create a more reasonable predictor of future home values. The typical home value predicted for 2030 seems more likely than any of the other models.</p>
                    <p>A regression line was done on the census.gov data to compare the median home value predictions with the Zillow data predictions. While the prediction for 2030 goes along with the current trend, the possibility that the median home value will be this large is the main contributing factor for possibly leaving the state.</p>
                </div>
                <div class="col-md-6">
                    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100" src="static/images/median_housing1.png" alt="Slide 1">
                                <!-- <div class="carousel-caption d-none d-md-block text-dark">
                                    <h5>Median housing costs from census.gov 2010-2018 data.</h5>
                                </div> -->
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="static/images/median_housing2.png" alt="Slide 2">
                                <!-- <div class="carousel-caption d-none d-md-block text-dark">
                                    <h5>Median housing costs from census.gov from 2013 to 2018 to remove recession data.</h5>
                                </div> -->
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="static/images/median_home_value1.png" alt="Slide 3">
                                <!-- <div class="carousel-caption d-none d-md-block text-dark">
                                    <h5>Zillow data for California by month starting in April 1996.</h5>
                                </div> -->
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="static/images/median_home_value2.png" alt="Slide 4">
                                <!-- <div class="carousel-caption d-none d-md-block text-dark">
                                    <h5>Median home value from census.gov for California.</h5>
                                </div> -->
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="sr-only">Next</span>
                        </a>                
                    </div>
                </div>
            </div>
        </br>
        </br>
            <div class="row" id="migration-analysis">
                <div class="col-md-5">
                    <h3>Looking Beyond California</h3>
                    <h4>US Migration Analysis</h4>
                    <p>The census.gov website has migration flow data for each year starting in 2010. The information includes population, how many lived in the same or a different state the previous year, and the number moving between states.</p>
                    <p>After removing the state to state information, a K-means machine learning model was run to see if there was any interesting grouping going on with the migration flows. The scatterplot shows that there are 5 distinct classes for the 50 states between 2010 and 2018, based on population and the number of people who lived in a different state the previous year.</p>
                    <p>Further analysis was done with the state to state information, as well as all information using the PCA method to reduce features. While all showed groupings of some sort, it is not known to us what these groupings suggest. Given more time, it would be interesting to find out if there are any significant features that contribute to the groupings.</p>
                </div>
                <div class="col-md-7" id="kmeans-image">
                    <div id="carouselSecondIndicators" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselSecondIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselSecondIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselSecondIndicators" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100" src="static/images/state_migration_kmeans_scatter.png" alt="Slide 1">
                                <!-- <div class="carousel-caption d-none d-md-block text-dark">
                                    <h5>Median housing costs from census.gov 2010-2018 data.</h5>
                                </div> -->
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="static/images/state_to_state_pca_scatter.png" alt="Slide 2">
                                <!-- <div class="carousel-caption d-none d-md-block text-dark">
                                    <h5>Median housing costs from census.gov from 2013 to 2018 to remove recession data.</h5>
                                </div> -->
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="static/images/state_migration_pca_scatter.png" alt="Slide 3">
                                <!-- <div class="carousel-caption d-none d-md-block text-dark">
                                    <h5>Zillow data for California by month starting in April 1996.</h5>
                                </div> -->
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselSecondIndicators" role="button" data-slide="prev">
                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselSecondIndicators" role="button" data-slide="next">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="sr-only">Next</span>
                        </a>                
                    </div>
                </div>
            </div>
            <div class="row" id="migration-interactive">    
                <div class="col-md-3">
                    <h3>US Migration Table</h3>
                    <p>Take a look at census data for each state by year to see housing costs, income, and migration changes. Filter to find your state or a state of interest.</p>
                    <p>Leave: 0 = stay; 1 = leave</p>
                    <form class="bg-dark">
                        <p>Filter Search</p>
                        <ul class="list-group bg-dark">
                            <li class="list-group-item bg-dark">
                                <label for="year">Enter Year</label>
                                <input type="text" placeholder="2010" id="year" />
                            </li>
                            <li class="list-group-item bg-dark">
                                <label for="state">Enter State</label>
                                <input type="text" placeholder="California" id="state" />
                            </li>
                            <li class="list-group-item bg-dark">
                                <button id="filter-btn" type="button" class="btn btn-dark">Filter Table</button>
                            </li>
                        </ul>
                    </form>
                </div>
                <div class="col-md-9">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>State</th>
                                <th>Median Home Value (in thousands USD)</th>
                                <th>Median Monthly Housing Cost (USD)</th>
                                <th>Median Annual Income (in thousands USD)</th>
                                <th>Population</th>
                                <th>Net Population Change</th>
                                <th>Net Migration</th>
                                <th>Leave</th>
                            </tr>
                        </thead>
                        <tbody id="migration-table"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
<!-- Leaflet JavaScript -->
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
   integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
   crossorigin=""></script>
<!-- API key -->
<script type="text/javascript" src="static/js/config.js"></script>
<!-- Our JavaScript for CA Migration Flow map-->
<script type="text/javascript" src="static/js/cities.js"></script>
<script type="text/javascript" src="static/js/logic.js"></script>
<!-- Our JavaScript for Migration table -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.11.0/d3.js"></script>
<script src="static/js/data.js"></script>
<script src="static/js/app.js"></script>
<!-- Optional JavaScript needed for carousel -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>    
</body>
</html>